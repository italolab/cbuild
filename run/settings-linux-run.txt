compiler=g++
output.file.name=cbuild

src.dir=../src
test.dir=../test
build.dir=build

build.files=

$debug_bin_dir=bin/Debug
$debug_obj_dir=obj/Debug
$debug_compiler_params=-Wall -fexceptions -g -std=c++17
$debug_linker_params=

$release_bin_dir=bin/Release
$release_obj_dir=obj/Release
$release_compiler_params=-Wall -fexceptions -O2 -std=c++17
$release_linker_params=-s -static

bin.dir=$($(target)_bin_dir)
obj.dir=$($(target)_obj_dir)
compiler.params=$($(target)_compiler_params)
linker.params=$($(target)_linker_params)

lib.dirs=
include.dirs=
libs=
#defines=

test.include.dirs=../include
test.lib.dirs=../lib
test.libs=cbtest

$project_name=cbuild

task copy showoutput;
task compile verbose;

task copy after
    echo Copia...

    @echo "abc"
    shellbegin
        if [ -f "settings.txt" ]; then
            echo "O arquivo existe...!"
        else 
            echo "Arquivo nao existe: settings.txt"
        fi
    endshell

endtask

task debug before
    @dir
    echo Debug executado!
endtask

task finish after
    $lib_dir=$(working_dir)/../lib

    mkdir build/include

    cp -r $(src.dir)/**/io/*.h build/include
    cp $(src.dir)/*.cpp $(build.dir)
    mkdir $(build.dir)/objects
    cp $(obj.dir)/src/io/* $(build.dir)/objects

    cp $(lib_dir)/libcbtest.a $(build.dir)/libtest.a
    cp ../include/test/cbtest.h $(build.dir)/cbtest.h
    cp ../include/test/cbtest.h $(build.dir)/cbtest.h

    cp -r $(src.dir) $(build.dir)/source

    #mkdir -p $(build.dir)/a/b/c

    #cp ../../italo-xadrez/italo-xadrez $(build.dir)

    #cd ../../italo-xadrez
    #cp -r Src ../$(project_name)/$(build.dir)

    #cd ../$(project_name)/run

    #rm $(build.dir)/objects/io.o
    #rm $(build.dir)/ma*n.*
    #rm $(build.dir)/sett*.*

    #rm -r $(include.dirs)/io/fi*r
    #rm -r $(bin.dir)
endtask